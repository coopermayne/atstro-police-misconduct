---
import MainLayout from '../layouts/MainLayout.astro';
import NewsletterCTA from '../components/NewsletterCTA.astro';
---

<MainLayout content={{ title: 'Get Help' }}>
  
  <!-- Newsletter CTA Section -->
  <NewsletterCTA />

  <!-- Hero Section -->
  <header id="legal-help" class="bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800">
    <div class="container px-6 py-12 mx-auto lg:py-16">
      <div class="max-w-4xl mx-auto text-center">
        <div class="inline-flex items-center gap-2 px-4 py-2 mb-6 text-sm font-semibold text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-full border border-red-200 dark:border-red-800">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Resources for Victims & Families
        </div>
        
        <h1 class="text-4xl font-bold text-gray-900 dark:text-white lg:text-5xl leading-tight">
          You Don't Have to Face This Alone
        </h1>
        
        <p class="mt-6 text-xl text-gray-600 dark:text-gray-400 leading-relaxed max-w-3xl mx-auto">
          If you or a family member has been injured or killed by police in California, understanding your rights and taking the right steps is critical.
        </p>
      </div>
    </div>
  </header>

  <!-- Legal Representation Section -->
  <section class="bg-gray-50 dark:bg-gray-800 px-6 py-12 border-b border-gray-200 dark:border-gray-700">
    <div class="container mx-auto max-w-6xl">
      <div class="grid lg:grid-cols-2 gap-8 items-start">
        <!-- Left: Information -->
        <div>
          <div class="inline-flex items-center gap-2 px-4 py-2 mb-4 text-sm font-semibold text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-full border border-red-200 dark:border-red-800">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Time-Sensitive
          </div>
          
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
            Need Legal Representation?
          </h2>
          
          <p class="text-gray-700 dark:text-gray-300 mb-6 leading-relaxed">
            The most important step is consulting with an experienced civil rights attorney as soon as possible. California law imposes strict deadlines and complex procedural requirements that can permanently bar valid claims if not properly handled.
          </p>

          <div class="space-y-4 mb-6">
            <div class="flex gap-3">
              <div class="flex-shrink-0 w-6 h-6 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mt-1">
                <svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <div>
                <p class="text-gray-700 dark:text-gray-300"><strong>6-month deadline</strong> to file claims under California's Tort Claims Act</p>
              </div>
            </div>

            <div class="flex gap-3">
              <div class="flex-shrink-0 w-6 h-6 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mt-1">
                <svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <div>
                <p class="text-gray-700 dark:text-gray-300">Navigate complex legal barriers like <strong>qualified immunity</strong></p>
              </div>
            </div>

            <div class="flex gap-3">
              <div class="flex-shrink-0 w-6 h-6 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mt-1">
                <svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <div>
                <p class="text-gray-700 dark:text-gray-300">Preserve critical evidence like <strong>body camera footage</strong></p>
              </div>
            </div>

            <div class="flex gap-3">
              <div class="flex-shrink-0 w-6 h-6 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mt-1">
                <svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <div>
                <p class="text-gray-700 dark:text-gray-300">Protect your rights throughout investigations</p>
              </div>
            </div>
          </div>

          <div class="flex items-start gap-3">
            <div class="flex-shrink-0 w-1 h-16 bg-red-600 rounded-full mt-1"></div>
            <p class="text-gray-700 dark:text-gray-300">
              <strong>Many civil rights attorneys offer free consultations and work on contingency</strong>â€”you don't pay unless they recover compensation for you.
            </p>
          </div>
        </div>

        <!-- Right: Contact Form -->
        <div class="bg-white dark:bg-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 p-8">
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">
            Request Attorney Referral
          </h3>
          <p class="text-gray-600 dark:text-gray-400 mb-6">
            Fill out this form and we'll help connect you with qualified civil rights attorneys in California.
          </p>

          <!-- Success Message -->
          <div id="form-success" class="hidden mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg">
            <div class="flex items-start gap-3">
              <svg class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <div>
                <h4 class="font-semibold text-green-800 dark:text-green-300">Thank you for your submission!</h4>
                <p class="text-sm text-green-700 dark:text-green-400 mt-1">We've received your request and will be in touch soon.</p>
              </div>
            </div>
          </div>

          <!-- Error Message -->
          <div id="form-error" class="hidden mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg">
            <div class="flex items-start gap-3">
              <svg class="w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
              </svg>
              <div>
                <h4 class="font-semibold text-red-800 dark:text-red-300">There was a problem</h4>
                <p class="text-sm text-red-700 dark:text-red-400 mt-1">Please try again or contact us directly.</p>
              </div>
            </div>
          </div>

          <form
            id="contact-form"
            name="contact"
            method="POST"
            data-netlify="true"
            data-netlify-honeypot="bot-field"
            class="space-y-4"
          >
            <!-- Netlify Forms requires a hidden input with the form name -->
            <input type="hidden" name="form-name" value="contact" />

            <!-- Honeypot field for spam protection (hidden from users) -->
            <div class="hidden">
              <label>Don't fill this out if you're human: <input name="bot-field" /></label>
            </div>
            <div>
              <label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Full Name <span class="text-red-600">*</span>
              </label>
              <input 
                type="text" 
                id="name" 
                name="name"
                required
                class="w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 focus:border-red-500 dark:focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-500/20 transition-all"
                placeholder="John Doe"
              >
            </div>

            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Email Address <span class="text-red-600">*</span>
              </label>
              <input 
                type="email" 
                id="email" 
                name="email"
                required
                class="w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 focus:border-red-500 dark:focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-500/20 transition-all"
                placeholder="your@email.com"
              >
            </div>

            <div>
              <label for="phone" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Phone Number <span class="text-red-600">*</span>
              </label>
              <input 
                type="tel" 
                id="phone" 
                name="phone"
                required
                class="w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 focus:border-red-500 dark:focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-500/20 transition-all"
                placeholder="(555) 123-4567"
              >
            </div>

            <div>
              <label for="location" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Location of Incident <span class="text-red-600">*</span>
              </label>
              <input 
                type="text" 
                id="location" 
                name="location"
                required
                class="w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 focus:border-red-500 dark:focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-500/20 transition-all"
                placeholder="City, County, or specific address"
              >
              <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Please be as specific as possible</p>
            </div>

            <div>
              <label for="incident-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Approximate Date of Incident
              </label>
              <input 
                type="date" 
                id="incident-date" 
                name="incident-date"
                class="w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 focus:border-red-500 dark:focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-500/20 transition-all"
              >
            </div>

            <div>
              <label for="details" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Brief Description
              </label>
              <textarea 
                id="details" 
                name="details"
                rows="4"
                class="w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 focus:border-red-500 dark:focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-500/20 transition-all resize-none"
                placeholder="Please briefly describe what happened..."
              ></textarea>
            </div>

            <button 
              type="submit"
              class="w-full px-6 py-3 text-sm font-semibold text-white bg-red-600 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all shadow-lg hover:shadow-xl"
            >
              Submit Request
            </button>

            <p class="text-xs text-gray-500 dark:text-gray-400 text-center">
              By submitting this form, you agree to be contacted about your case. We respect your privacy and will not share your information.
            </p>
          </form>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Additional Resources Section -->
  <section class="bg-white dark:bg-gray-900 px-6 py-12">
    <div class="container mx-auto max-w-6xl">
      <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8 text-center">Additional Resources</h2>
      
      <div class="grid md:grid-cols-3 gap-6">
        <!-- Blog/Legal Guides -->
        <a href="/posts" class="group bg-gray-50 dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 hover:border-red-300 dark:hover:border-red-700 transition-colors">
          <div class="w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center mb-4 group-hover:scale-105 transition-transform">
            <svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Legal Guides & Articles</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm">Learn about your rights, legal procedures, and recent developments in police accountability law</p>
          <div class="flex items-center gap-1 mt-4 text-sm font-medium text-red-600 dark:text-red-400">
            <span>Browse articles</span>
            <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
        </a>

        <!-- Case Database -->
        <a href="/cases" class="group bg-gray-50 dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 hover:border-red-300 dark:hover:border-red-700 transition-colors">
          <div class="w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center mb-4 group-hover:scale-105 transition-transform">
            <svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Browse Case Database</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm">Review documented cases of police misconduct across California to understand patterns and outcomes</p>
          <div class="flex items-center gap-1 mt-4 text-sm font-medium text-red-600 dark:text-red-400">
            <span>View cases</span>
            <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
        </a>

        <!-- Know Your Rights -->
        <a href="/posts/tags/your-rights" class="group bg-gray-50 dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 hover:border-red-300 dark:hover:border-red-700 transition-colors">
          <div class="w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center mb-4 group-hover:scale-105 transition-transform">
            <svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Know Your Rights</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm">Essential information about your constitutional rights during police encounters and investigations</p>
          <div class="flex items-center gap-1 mt-4 text-sm font-medium text-red-600 dark:text-red-400">
            <span>Learn more</span>
            <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
        </a>
      </div>
    </div>
  </section>

</MainLayout>

<script>
  // Handle contact form submission
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const successMessage = document.getElementById('form-success');
  const errorMessage = document.getElementById('form-error');

  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Get form data
      const formData = new FormData(form);

      try {
        // Submit to Netlify
        const response = await fetch('/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: new URLSearchParams(formData as any).toString(),
        });

        if (response.ok) {
          // Show success message
          successMessage?.classList.remove('hidden');
          errorMessage?.classList.add('hidden');
          form.reset();

          // Scroll to success message
          successMessage?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        } else {
          throw new Error('Form submission failed');
        }
      } catch (error) {
        // Show error message
        errorMessage?.classList.remove('hidden');
        successMessage?.classList.add('hidden');

        // Scroll to error message
        errorMessage?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    });
  }
</script>